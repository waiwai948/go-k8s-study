# 金丝雀发布、蓝绿发布、A/B Test

-----

## 金丝雀发布
  - 上线一个预览版本，先把少部分比如百分之5的流量导入预览版本，让一部分的先使用预览版本以进行测试。
  - 好处：1、通过将流量定向到多个版本来支持横向拓展，2、不必担心因发布新版本导致大面积瘫痪

### 使用istio的流量管理功能:
![canary](./canary.png)

## 蓝绿发布
  - 可以瞬间将流量导入到新版本，也可以瞬间回退到旧版本
  - 首先通过label标签中加入version，然后开始的service的选择器是指向1版本
  - 然后将新版本2上线，之后改变service的selector到版本2（nginx也可以通过控制流量来做到蓝绿发布，但是较为繁琐）


### 使用istio的流量管理功能:
![BG](./BG.png)

## A/B测试：
  - 感觉本质上和金丝雀没啥太大区别，无非就是流量导入的比例各占一半，然后对比两种（或多种）版本



